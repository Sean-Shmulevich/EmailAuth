import{S as Se,i as ye,s as Ee,k as p,q as N,a as T,l as d,m as g,r as O,h as f,c as k,n as r,b as D,E as t,a0 as fe,U as ce,X as me,F as pe,Z as Pe,u as z}from"../chunks/index.0a5d0d14.js";import{e as de}from"../chunks/forms.c872ce3b.js";function he(i){let e,l=i[1].emailSent+"",o,s,a,U,w=i[0].user.email+"",m,M,R,_,I;return{c(){e=p("p"),o=N(l),s=T(),a=p("p"),U=N("Please check your inbox ("),m=N(w),M=N(") for a verification email"),R=T(),_=p("p"),I=N("Be sure to check your spam if you do not receive the email"),this.h()},l(n){e=d(n,"P",{class:!0});var h=g(e);o=O(h,l),h.forEach(f),s=k(n),a=d(n,"P",{class:!0});var v=g(a);U=O(v,"Please check your inbox ("),m=O(v,w),M=O(v,") for a verification email"),v.forEach(f),R=k(n),_=d(n,"P",{class:!0});var q=g(_);I=O(q,"Be sure to check your spam if you do not receive the email"),q.forEach(f),this.h()},h(){r(e,"class","error svelte-r87ebd"),r(a,"class","svelte-r87ebd"),r(_,"class","text-red-500 svelte-r87ebd")},m(n,h){D(n,e,h),t(e,o),D(n,s,h),D(n,a,h),t(a,U),t(a,m),t(a,M),D(n,R,h),D(n,_,h),t(_,I)},p(n,h){h&2&&l!==(l=n[1].emailSent+"")&&z(o,l),h&1&&w!==(w=n[0].user.email+"")&&z(m,w)},d(n){n&&f(e),n&&f(s),n&&f(a),n&&f(R),n&&f(_)}}}function _e(i){let e,l;return{c(){e=p("p"),l=N(i[2]),this.h()},l(o){e=d(o,"P",{class:!0});var s=g(e);l=O(s,i[2]),s.forEach(f),this.h()},h(){r(e,"class","error svelte-r87ebd")},m(o,s){D(o,e,s),t(e,l)},p(o,s){s&4&&z(l,o[2])},d(o){o&&f(e)}}}function ve(i){let e,l=i[1].emailSent+"",o;return{c(){e=p("p"),o=N(l),this.h()},l(s){e=d(s,"P",{class:!0});var a=g(e);o=O(a,l),a.forEach(f),this.h()},h(){r(e,"class","error svelte-r87ebd")},m(s,a){D(s,e,a),t(e,o)},p(s,a){a&2&&l!==(l=s[1].emailSent+"")&&z(o,l)},d(s){s&&f(e)}}}function be(i){let e,l=i[1].message+"",o;return{c(){e=p("p"),o=N(l),this.h()},l(s){e=d(s,"P",{class:!0});var a=g(e);o=O(a,l),a.forEach(f),this.h()},h(){r(e,"class","error svelte-r87ebd")},m(s,a){D(s,e,a),t(e,o)},p(s,a){a&2&&l!==(l=s[1].message+"")&&z(o,l)},d(s){s&&f(e)}}}function Te(i){var ae,re,ie;let e,l,o,s,a,U,w,m,M,R,_,I,n,h,v,q,K,C,F,L,B,Q,A,b,Y,W,j,x,J,$,ee,te,le,se,S=((ae=i[1])==null?void 0:ae.emailSent)&&i[5]&&he(i),y=i[2]&&i[4]&&_e(i),E=((re=i[1])==null?void 0:re.emailSent)&&i[5]&&ve(i),P=((ie=i[1])==null?void 0:ie.message)&&be(i);return{c(){e=p("div"),l=p("h1"),o=N("Verify Your account"),s=T(),a=p("h2"),U=N("Send verification email"),w=T(),m=p("form"),M=p("input"),R=T(),S&&S.c(),_=T(),I=p("h1"),n=N("OR"),h=T(),v=p("h2"),q=N("Send verification text"),K=T(),C=p("form"),F=p("input"),L=T(),B=p("input"),Q=T(),y&&y.c(),A=T(),b=p("form"),Y=p("input"),W=T(),j=p("input"),x=T(),J=p("p"),$=N("Case sensitive"),ee=T(),E&&E.c(),te=T(),P&&P.c(),this.h()},l(c){e=d(c,"DIV",{class:!0});var u=g(e);l=d(u,"H1",{class:!0});var X=g(l);o=O(X,"Verify Your account"),X.forEach(f),s=k(u),a=d(u,"H2",{class:!0});var Z=g(a);U=O(Z,"Send verification email"),Z.forEach(f),w=k(u),m=d(u,"FORM",{action:!0,method:!0,class:!0});var V=g(m);M=d(V,"INPUT",{type:!0,class:!0}),R=k(V),S&&S.l(V),V.forEach(f),_=k(u),I=d(u,"H1",{class:!0});var oe=g(I);n=O(oe,"OR"),oe.forEach(f),h=k(u),v=d(u,"H2",{class:!0});var ne=g(v);q=O(ne,"Send verification text"),ne.forEach(f),K=k(u),C=d(u,"FORM",{class:!0});var G=g(C);F=d(G,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),L=k(G),B=d(G,"INPUT",{type:!0,class:!0}),G.forEach(f),Q=k(u),y&&y.l(u),A=k(u),b=d(u,"FORM",{action:!0,method:!0,class:!0});var H=g(b);Y=d(H,"INPUT",{type:!0,name:!0,class:!0}),W=k(H),j=d(H,"INPUT",{type:!0,class:!0}),x=k(H),J=d(H,"P",{class:!0});var ue=g(J);$=O(ue,"Case sensitive"),ue.forEach(f),ee=k(H),E&&E.l(H),H.forEach(f),te=k(u),P&&P.l(u),u.forEach(f),this.h()},h(){r(l,"class","pt-10 svelte-r87ebd"),r(a,"class","mt-5"),r(M,"type","submit"),M.value="Send email",r(M,"class","svelte-r87ebd"),r(m,"action","?/sendEmail"),r(m,"method","post"),r(m,"class","svelte-r87ebd"),r(I,"class","text-center svelte-r87ebd"),r(v,"class","mt-5"),r(F,"type","tel"),r(F,"id","phone"),r(F,"name","phone"),r(F,"placeholder","267-321-9999"),r(F,"class","svelte-r87ebd"),r(B,"type","submit"),B.value="Send verification text",r(B,"class","svelte-r87ebd"),r(C,"class","svelte-r87ebd"),r(Y,"type","text"),r(Y,"name","token"),r(Y,"class","svelte-r87ebd"),r(j,"type","submit"),j.value="Input SMS verification code",r(j,"class","svelte-r87ebd"),r(J,"class","svelte-r87ebd"),r(b,"action","?/validateCode"),r(b,"method","post"),r(b,"class","svelte-r87ebd"),r(e,"class","rounded-xl bg-white px-10 pb-10 pt-0 -mt-10 max-w-[800px] mx-auto")},m(c,u){D(c,e,u),t(e,l),t(l,o),t(e,s),t(e,a),t(a,U),t(e,w),t(e,m),t(m,M),t(m,R),S&&S.m(m,null),t(e,_),t(e,I),t(I,n),t(e,h),t(e,v),t(v,q),t(e,K),t(e,C),t(C,F),fe(F,i[3]),t(C,L),t(C,B),t(e,Q),y&&y.m(e,null),t(e,A),t(e,b),t(b,Y),t(b,W),t(b,j),t(b,x),t(b,J),t(J,$),t(b,ee),E&&E.m(b,null),t(e,te),P&&P.m(e,null),le||(se=[ce(de.call(null,m)),me(F,"input",i[6]),me(C,"submit",i[7]),ce(de.call(null,b))],le=!0)},p(c,[u]){var X,Z,V;(X=c[1])!=null&&X.emailSent&&c[5]?S?S.p(c,u):(S=he(c),S.c(),S.m(m,null)):S&&(S.d(1),S=null),u&8&&fe(F,c[3]),c[2]&&c[4]?y?y.p(c,u):(y=_e(c),y.c(),y.m(e,A)):y&&(y.d(1),y=null),(Z=c[1])!=null&&Z.emailSent&&c[5]?E?E.p(c,u):(E=ve(c),E.c(),E.m(b,null)):E&&(E.d(1),E=null),(V=c[1])!=null&&V.message?P?P.p(c,u):(P=be(c),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i:pe,o:pe,d(c){c&&f(e),S&&S.d(),y&&y.d(),E&&E.d(),P&&P.d(),le=!1,Pe(se)}}}function ke(i,e,l){let{data:o}=e,{form:s}=e,a,U=!0,w=!0,m;function M(){a=this.value,l(3,a)}const R=async _=>{let I=new FormData;const n=localStorage.getItem("sendTimeText");if(n){const v=Date.now()-parseInt(n);console.log(v),v<60*1e3?I.append("lock","exist"):localStorage.removeItem("sendTimeText")}else localStorage.setItem("sendTimeText",Date.now().toString());I.append("phoneNumber",a);try{let v=await(await fetch("?/sendText",{method:"POST",body:I})).json();return l(2,m=JSON.parse(v.data)[1]),v}catch(h){return console.log(h),!1}};return i.$$set=_=>{"data"in _&&l(0,o=_.data),"form"in _&&l(1,s=_.form)},i.$$.update=()=>{i.$$.dirty&6&&(m&&(setTimeout(()=>{l(4,U=!1)},1e4),l(4,U=!0)),s&&s.emailSent&&(setTimeout(()=>{l(5,w=!1)},8e3),l(5,w=!0)))},[o,s,m,a,U,w,M,R]}class we extends Se{constructor(e){super(),ye(this,e,ke,Te,Ee,{data:0,form:1})}}export{we as component};

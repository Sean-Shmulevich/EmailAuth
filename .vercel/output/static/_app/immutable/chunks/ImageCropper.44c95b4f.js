import{S as oe,i as le,s as ce,k as U,q as D,a as P,l as z,m as B,r as L,h as i,c as T,n as b,b as I,E as S,X as A,Y as F,v as ue,d as v,f as ne,g as $,a1 as fe,w as Q,_ as ee,y as pe,z as ie,p as j,Q as Y,A as he,$ as te,B as me,F as W}from"./index.0a5d0d14.js";import{C as _e}from"./Cropper.7348cff3.js";import"./FileDrop.svelte_svelte_type_style_lang.46a8f44d.js";import"./paths.fe267632.js";const ae=o=>new Promise((t,e)=>{const n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",c=>e(c)),n.setAttribute("crossOrigin","anonymous"),n.src=o});function se(o){return o*Math.PI/180}function be(o,t,e){const n=se(e);return{width:Math.abs(Math.cos(n)*o)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*o)+Math.abs(Math.cos(n)*t)}}async function ge(o,t,e=0,n={horizontal:!1,vertical:!1}){const c=await ae(o),m=document.createElement("canvas"),l=m.getContext("2d");if(!l)return null;const f=se(e),{width:h,height:a}=be(c.width,c.height,e);m.width=h,m.height=a,l.translate(h/2,a/2),l.rotate(f),l.scale(n.horizontal?-1:1,n.vertical?-1:1),l.translate(-c.width/2,-c.height/2),l.drawImage(c,0,0);const p=l.getImageData(t.x,t.y,t.width,t.height);return m.width=t.width,m.height=t.height,l.putImageData(p,0,0),new Promise((g,r)=>{m.toBlob(u=>{g(u)},"image/jpeg")})}function we(o){let t,e,n,c,m,l,f,h,a,p,g,r,u,_,k,d,E,N;function q(s){o[21](s)}function M(s){o[22](s)}let O={image:o[8],aspect:o[3]};o[6]!==void 0&&(O.crop=o[6]),o[7]!==void 0&&(O.zoom=o[7]),e=new _e({props:O}),Q.push(()=>ee(e,"crop",q)),Q.push(()=>ee(e,"zoom",M)),e.$on("cropcomplete",o[14]);function H(s,y){return s[2]?ke:de}let C=H(o),R=C(o);return{c(){t=U("div"),pe(e.$$.fragment),m=P(),l=U("h2"),f=D("Preview"),h=P(),a=U("div"),p=U("img"),r=P(),R.c(),u=P(),_=U("button"),k=D("Start Over"),this.h()},l(s){t=z(s,"DIV",{style:!0});var y=B(t);ie(e.$$.fragment,y),y.forEach(i),m=T(s),l=z(s,"H2",{class:!0});var x=B(l);f=L(x,"Preview"),x.forEach(i),h=T(s),a=z(s,"DIV",{class:!0,style:!0});var V=B(a);p=z(V,"IMG",{class:!0,src:!0,alt:!0,style:!0}),V.forEach(i),r=T(s),R.l(s),u=T(s),_=z(s,"BUTTON",{type:!0,class:!0});var X=B(_);k=L(X,"Start Over"),X.forEach(i),this.h()},h(){j(t,"position","relative"),j(t,"width","100%"),j(t,"height","300px"),b(l,"class","font-bold text-xl mb-3"),b(p,"class","prof-pic svelte-1r0qc53"),Y(p.src,g=o[8])||b(p,"src",g),b(p,"alt","Profile example"),b(p,"style",o[13]),b(a,"class","prof-pic-wrapper svelte-1r0qc53"),j(a,"height",o[4]+"px"),j(a,"width",o[5]+"px"),b(_,"type","button"),b(_,"class","btn svelte-1r0qc53")},m(s,y){I(s,t,y),he(e,t,null),I(s,m,y),I(s,l,y),S(l,f),I(s,h,y),I(s,a,y),S(a,p),o[23](p),I(s,r,y),R.m(s,y),I(s,u,y),I(s,_,y),S(_,k),d=!0,E||(N=A(_,"click",F(o[26])),E=!0)},p(s,y){const x={};y&256&&(x.image=s[8]),y&8&&(x.aspect=s[3]),!n&&y&64&&(n=!0,x.crop=s[6],te(()=>n=!1)),!c&&y&128&&(c=!0,x.zoom=s[7],te(()=>c=!1)),e.$set(x),(!d||y&256&&!Y(p.src,g=s[8]))&&b(p,"src",g),(!d||y&16)&&j(a,"height",s[4]+"px"),(!d||y&32)&&j(a,"width",s[5]+"px"),C===(C=H(s))&&R?R.p(s,y):(R.d(1),R=C(s),R&&(R.c(),R.m(u.parentNode,u)))},i(s){d||($(e.$$.fragment,s),d=!0)},o(s){v(e.$$.fragment,s),d=!1},d(s){s&&i(t),me(e),s&&i(m),s&&i(l),s&&i(h),s&&i(a),o[23](null),s&&i(r),R.d(s),s&&i(u),s&&i(_),E=!1,N()}}}function ye(o){let t,e,n,c,m,l;return{c(){t=U("h2"),e=D("Upload a picture for cropping?"),n=P(),c=U("input"),this.h()},l(f){t=z(f,"H2",{class:!0});var h=B(t);e=L(h,"Upload a picture for cropping?"),h.forEach(i),n=T(f),c=z(f,"INPUT",{type:!0,accept:!0,class:!0}),this.h()},h(){b(t,"class","font-bold text-xl mb-3"),b(c,"type","file"),b(c,"accept",".jpg, .jpeg, .png"),b(c,"class","input svelte-1r0qc53")},m(f,h){I(f,t,h),S(t,e),I(f,n,h),I(f,c,h),o[20](c),m||(l=A(c,"change",F(o[19])),m=!0)},p:W,i:W,o:W,d(f){f&&i(t),f&&i(n),f&&i(c),o[20](null),m=!1,l()}}}function de(o){let t,e,n,c,m;return{c(){t=U("br"),e=U("button"),n=D("Crop!"),this.h()},l(l){t=z(l,"BR",{}),e=z(l,"BUTTON",{type:!0,class:!0});var f=B(e);n=L(f,"Crop!"),f.forEach(i),this.h()},h(){b(e,"type","button"),b(e,"class","btn svelte-1r0qc53")},m(l,f){I(l,t,f),I(l,e,f),S(e,n),c||(m=A(e,"click",F(o[25])),c=!0)},p:W,d(l){l&&i(t),l&&i(e),c=!1,m()}}}function ke(o){let t,e,n,c,m,l,f,h,a,p,g;return{c(){t=U("h2"),e=D("Cropped Output"),n=P(),c=U("img"),l=U("br"),f=P(),h=U("button"),a=D("Submit"),this.h()},l(r){t=z(r,"H2",{class:!0});var u=B(t);e=L(u,"Cropped Output"),u.forEach(i),n=T(r),c=z(r,"IMG",{src:!0,style:!0,alt:!0}),l=z(r,"BR",{}),f=T(r),h=z(r,"BUTTON",{type:!0,class:!0});var _=B(h);a=L(_,"Submit"),_.forEach(i),this.h()},h(){b(t,"class","font-bold text-xl mb-3"),Y(c.src,m=URL.createObjectURL(o[2]))||b(c,"src",m),j(c,"width",o[4]+"px"),j(c,"height",o[5]+"px"),b(c,"alt","Cropped profile"),b(h,"type","button"),b(h,"class","btn svelte-1r0qc53")},m(r,u){I(r,t,u),S(t,e),I(r,n,u),I(r,c,u),I(r,l,u),I(r,f,u),I(r,h,u),S(h,a),p||(g=A(h,"click",F(o[24])),p=!0)},p(r,u){u&4&&!Y(c.src,m=URL.createObjectURL(r[2]))&&b(c,"src",m),u&16&&j(c,"width",r[4]+"px"),u&32&&j(c,"height",r[5]+"px")},d(r){r&&i(t),r&&i(n),r&&i(c),r&&i(l),r&&i(f),r&&i(h),p=!1,g()}}}function Ie(o){let t,e,n,c,m,l,f,h,a,p,g,r,u,_,k;const d=[ye,we],E=[];function N(q,M){return q[8]?1:0}return p=N(o),g=E[p]=d[p](o),{c(){t=U("div"),e=U("div"),n=U("h2"),c=D("Image Upload"),m=P(),l=U("button"),f=U("p"),h=D("X"),a=P(),g.c(),this.h()},l(q){t=z(q,"DIV",{class:!0});var M=B(t);e=z(M,"DIV",{class:!0});var O=B(e);n=z(O,"H2",{class:!0});var H=B(n);c=L(H,"Image Upload"),H.forEach(i),m=T(O),l=z(O,"BUTTON",{type:!0,class:!0});var C=B(l);f=z(C,"P",{class:!0});var R=B(f);h=L(R,"X"),R.forEach(i),C.forEach(i),O.forEach(i),a=T(M),g.l(M),M.forEach(i),this.h()},h(){b(n,"class","font-bold text-2xl text-center w-full"),b(f,"class","text-2xl hover:text-red-700 text-black font-bold"),b(l,"type","button"),b(l,"class","btn close-button svelte-1r0qc53"),b(e,"class","flex justify-between w-full mb-5"),b(t,"class",r="fixed inset-1/2 w-3/4 h-3/4 bg-gray-500 rounded-xl p-10 transform -translate-x-1/2 -translate-y-1/2 overflow-y-scroll z-10 "+(o[1]?"":"nah")+" border-2 border-white flex flex-col items-center justify-center svelte-1r0qc53")},m(q,M){I(q,t,M),S(t,e),S(e,n),S(n,c),S(e,m),S(e,l),S(l,f),S(f,h),S(t,a),E[p].m(t,null),u=!0,_||(k=A(l,"click",F(o[18])),_=!0)},p(q,[M]){let O=p;p=N(q),p===O?E[p].p(q,M):(ue(),v(E[O],1,1,()=>{E[O]=null}),ne(),g=E[p],g?g.p(q,M):(g=E[p]=d[p](q),g.c()),$(g,1),g.m(t,null)),(!u||M&2&&r!==(r="fixed inset-1/2 w-3/4 h-3/4 bg-gray-500 rounded-xl p-10 transform -translate-x-1/2 -translate-y-1/2 overflow-y-scroll z-10 "+(q[1]?"":"nah")+" border-2 border-white flex flex-col items-center justify-center svelte-1r0qc53"))&&b(t,"class",r)},i(q){u||($(g),u=!0)},o(q){v(g),u=!1},d(q){q&&i(t),E[p].d(),_=!1,k()}}}function Ee(o,t,e){const n=fe();let c={x:0,y:0},m=1,l,f,h,{open:a}=t,{croppedImage:p}=t;function g(){n("cropSubmit",{text:"cropSubmitted",file:p})}let{square:r}=t,u,_,k,{mobile:d=!1}=t,E,N;function q(w){e(10,h=w.detail.pixels);const{x:J,y:G,width:K}=w.detail.pixels,Z=200/K;e(11,E.style=`margin: ${-G*Z}px 0 0 ${-J*Z}px; width: ${E.naturalWidth*Z}px;`,E)}function M(w){let J=w.target.files[0],G=new FileReader;G.onload=K=>{e(8,l=K.target.result)},G.readAsDataURL(J)}function O(){e(2,p=null),e(8,l=null)}const H=()=>{e(1,a=!a),O()},C=w=>M(w);function R(w){Q[w?"unshift":"push"](()=>{f=w,e(9,f)})}function s(w){c=w,e(6,c)}function y(w){m=w,e(7,m)}function x(w){Q[w?"unshift":"push"](()=>{E=w,e(11,E)})}const V=()=>{g(),e(8,l=null),e(0,r=!1),e(1,a=!a)},X=async()=>{e(2,p=await ge(l,h))},re=()=>{O()};return o.$$set=w=>{"open"in w&&e(1,a=w.open),"croppedImage"in w&&e(2,p=w.croppedImage),"square"in w&&e(0,r=w.square),"mobile"in w&&e(17,d=w.mobile)},o.$$.update=()=>{o.$$.dirty&131129&&(r?(e(3,u=1),e(4,_=300),e(5,k=300),e(3,u),e(0,r),e(4,_),e(5,k),e(17,d),e(4,_),e(0,r),e(3,u),e(5,k),e(17,d),e(5,k),e(0,r),e(3,u),e(4,_),e(17,d)):(e(3,u=3/4),e(4,_=300),e(5,k=400),e(3,u),e(0,r),e(4,_),e(5,k),e(17,d),e(4,_),e(0,r),e(3,u),e(5,k),e(17,d),e(5,k),e(0,r),e(3,u),e(4,_),e(17,d)),d&&(e(3,u=9/16),e(4,_=225),e(5,k=400),e(3,u),e(0,r),e(4,_),e(5,k),e(17,d),e(4,_),e(0,r),e(3,u),e(5,k),e(17,d),e(5,k),e(0,r),e(3,u),e(4,_),e(17,d)))},[r,a,p,u,_,k,c,m,l,f,h,E,g,N,q,M,O,d,H,C,R,s,y,x,V,X,re]}class Oe extends oe{constructor(t){super(),le(this,t,Ee,Ie,ce,{open:1,croppedImage:2,square:0,mobile:17})}}export{Oe as I};
